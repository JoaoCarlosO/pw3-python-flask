{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
  <h2>Cadastro de Músicas (Banco de Dados)</h2>

  <!-- Formulário de cadastro -->
  <form method="POST" action="{{ url_for('musicas') }}" class="mb-4">
    <div class="row">
      <div class="col-md-4">
        <label for="titulo" class="form-label">Título</label>
        <input type="text" name="titulo" id="titulo" class="form-control" required>
      </div>
      <div class="col-md-2">
        <label for="ano" class="form-label">Ano</label>
        <input type="number" name="ano" id="ano" class="form-control">
      </div>
      <div class="col-md-3">
        <label for="categoria" class="form-label">Categoria</label>
        <input type="text" name="categoria" id="categoria" class="form-control">
      </div>
      <div class="col-md-2">
        <label for="preco" class="form-label">Preço</label>
        <input type="number" step="0.01" name="preco" id="preco" class="form-control">
      </div>
      <div class="col-md-1">
        <label for="quantidade" class="form-label">Qtd</label>
        <input type="number" name="quantidade" id="quantidade" class="form-control">
      </div>
    </div>
    <button type="submit" class="btn btn-success mt-3">Cadastrar</button>
  </form>

  <!-- Tabela de músicas -->
  <h3>Lista de músicas cadastradas</h3>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>ID</th>
        <th>Título</th>
        <th>Ano</th>
        <th>Categoria</th>
        <th>Preço</th>
        <th>Quantidade</th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody>
      {% for m in musicas %}
      <tr>
        <td>{{ m.id }}</td>
        <td>{{ m.titulo }}</td>
        <td>{{ m.ano }}</td>
        <td>{{ m.categoria }}</td>
        <td>R$ {{ "%.2f"|format(m.preco or 0) }}</td>
        <td>{{ m.quantidade }}</td>
        <td>
          <a href="#" class="btn btn-warning btn-sm">Editar</a>
          <a href="#" class="btn btn-danger btn-sm">Excluir</a>
        </td>
      </tr>
      {% else %}
      <tr>
        <td colspan="7" class="text-center">Nenhuma música cadastrada.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
